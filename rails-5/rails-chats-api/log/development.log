Started POST "/session" for 127.0.0.1 at 2017-09-27 12:09:23 +0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"test1@example.com", "password"=>"[FILTERED]", "session"=>{"email"=>"test1@example.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test1@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "test1@example.com"], ["password_digest", "$2a$10$xuKEWCCzGWeo1Sl3dgEt/OLIdQa7lxbq0WqRL6lnTCdqCxgBVx.iS"], ["created_at", "2017-09-27 09:09:23.921124"], ["updated_at", "2017-09-27 09:09:23.921124"]]
  [1m[36mAuthToken Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "auth_tokens" WHERE "auth_tokens"."value" = ? LIMIT ?[0m  [["value", "d752cd26a343431fa8c08defa0b0f42e"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "test1@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mAuthToken Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "auth_tokens" WHERE "auth_tokens"."value" = ? AND "auth_tokens"."user_id" = ? LIMIT ?[0m  [["value", "d752cd26a343431fa8c08defa0b0f42e"], ["user_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "auth_tokens" ("value", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["value", "d752cd26a343431fa8c08defa0b0f42e"], ["user_id", 1], ["created_at", "2017-09-27 09:09:23.956798"], ["updated_at", "2017-09-27 09:09:23.956798"]]
  [1m[36mAuthToken Load (0.2ms)[0m  [1m[34mSELECT  "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35m (196.9ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 343ms (Views: 1.8ms | ActiveRecord: 201.0ms)


Started POST "/session" for 127.0.0.1 at 2017-09-27 12:09:29 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"test2@example.com", "password"=>"[FILTERED]", "session"=>{"email"=>"test2@example.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test2@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "test2@example.com"], ["password_digest", "$2a$10$rjarwAkclu584jGdQ8tRlune91.IGsx6juQm0rszu54.EX.ONf0Gq"], ["created_at", "2017-09-27 09:09:29.146429"], ["updated_at", "2017-09-27 09:09:29.146429"]]
  [1m[36mAuthToken Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "auth_tokens" WHERE "auth_tokens"."value" = ? LIMIT ?[0m  [["value", "bf81655a3451426a844e5118049032fe"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "test2@example.com"], ["id", 2], ["LIMIT", 1]]
  [1m[36mAuthToken Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "auth_tokens" WHERE "auth_tokens"."value" = ? AND "auth_tokens"."user_id" = ? LIMIT ?[0m  [["value", "bf81655a3451426a844e5118049032fe"], ["user_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "auth_tokens" ("value", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["value", "bf81655a3451426a844e5118049032fe"], ["user_id", 2], ["created_at", "2017-09-27 09:09:29.153130"], ["updated_at", "2017-09-27 09:09:29.153130"]]
  [1m[36mAuthToken Load (0.1ms)[0m  [1m[34mSELECT  "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = ? LIMIT ?[0m  [["user_id", 2], ["LIMIT", 1]]
  [1m[35m (159.7ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 261ms (Views: 0.2ms | ActiveRecord: 161.8ms)


Started POST "/session" for 127.0.0.1 at 2017-09-27 12:09:33 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"test3@example.com", "password"=>"[FILTERED]", "session"=>{"email"=>"test3@example.com", "password"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "test3@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "test3@example.com"], ["password_digest", "$2a$10$Ie/YQnO7WjUSpSLvlN787OGHh00qxi2bpLwbvO0XzBlYWpELS7aCS"], ["created_at", "2017-09-27 09:09:33.792539"], ["updated_at", "2017-09-27 09:09:33.792539"]]
  [1m[36mAuthToken Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "auth_tokens" WHERE "auth_tokens"."value" = ? LIMIT ?[0m  [["value", "676a6b468b6140d2bb5a30ecdec753cb"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "test3@example.com"], ["id", 3], ["LIMIT", 1]]
  [1m[36mAuthToken Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "auth_tokens" WHERE "auth_tokens"."value" = ? AND "auth_tokens"."user_id" = ? LIMIT ?[0m  [["value", "676a6b468b6140d2bb5a30ecdec753cb"], ["user_id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "auth_tokens" ("value", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["value", "676a6b468b6140d2bb5a30ecdec753cb"], ["user_id", 3], ["created_at", "2017-09-27 09:09:33.799198"], ["updated_at", "2017-09-27 09:09:33.799198"]]
  [1m[36mAuthToken Load (0.1ms)[0m  [1m[34mSELECT  "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = ? LIMIT ?[0m  [["user_id", 3], ["LIMIT", 1]]
  [1m[35m (204.0ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 305ms (Views: 0.3ms | ActiveRecord: 205.7ms)


Started PUT "/profile" for 127.0.0.1 at 2017-09-27 12:09:41 +0300
Processing by ProfilesController#update as HTML
  Parameters: {"email"=>"new_test1@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "id"=>"1", "profile"=>{"email"=>"new_test1@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "id"=>"1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAuthToken Load (0.2ms)[0m  [1m[34mSELECT "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = 1[0m
Unpermitted parameter: :id
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "new_test1@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["email", "new_test1@example.com"], ["password_digest", "$2a$10$vSSzPFZOha13t5weNdXOXO/YumNKhX1UBucRExq2e/k0ifzwxEXHm"], ["updated_at", "2017-09-27 09:09:41.518534"], ["id", 1]]
  [1m[35m (175.4ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (2.22ms)
Completed 200 OK in 295ms (Views: 18.1ms | ActiveRecord: 176.3ms)


Started PUT "/profile" for 127.0.0.1 at 2017-09-27 12:09:45 +0300
Processing by ProfilesController#update as HTML
  Parameters: {"email"=>"new_test2@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "id"=>"2", "profile"=>{"email"=>"new_test2@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "id"=>"2"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAuthToken Load (0.1ms)[0m  [1m[34mSELECT "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = 2[0m
Unpermitted parameter: :id
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "new_test2@example.com"], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["email", "new_test2@example.com"], ["password_digest", "$2a$10$6ofn51NBQE7uLJrkMOJzPuurIKaasTdEvThpKtHRPdcP3XbyLnpgm"], ["updated_at", "2017-09-27 09:09:46.011134"], ["id", 2]]
  [1m[35m (206.4ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (0.45ms)
Completed 200 OK in 303ms (Views: 1.0ms | ActiveRecord: 207.8ms)


Started PUT "/profile" for 127.0.0.1 at 2017-09-27 12:09:50 +0300
Processing by ProfilesController#update as HTML
  Parameters: {"email"=>"new_test3@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "id"=>"3", "profile"=>{"email"=>"new_test3@example.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "id"=>"3"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAuthToken Load (0.2ms)[0m  [1m[34mSELECT "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = 3[0m
Unpermitted parameter: :id
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND ("users"."id" != ?) LIMIT ?[0m  [["email", "new_test3@example.com"], ["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["email", "new_test3@example.com"], ["password_digest", "$2a$10$H.mXb6yFCaBXKd6amXt0juuGr.3MsBl9cl2A2DL6mEyABsrLF5Pyy"], ["updated_at", "2017-09-27 09:09:50.509912"], ["id", 3]]
  [1m[35m (198.3ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (0.34ms)
Completed 200 OK in 293ms (Views: 0.9ms | ActiveRecord: 199.1ms)


Started GET "/profile" for 127.0.0.1 at 2017-09-27 12:09:56 +0300
Processing by ProfilesController#show as HTML
  Parameters: {"id"=>"1", "profile"=>{"id"=>"1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAuthToken Load (0.2ms)[0m  [1m[34mSELECT "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = 1[0m
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (0.29ms)
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.3ms)


Started GET "/profile" for 127.0.0.1 at 2017-09-27 12:10:02 +0300
Processing by ProfilesController#show as HTML
  Parameters: {"id"=>"2", "profile"=>{"id"=>"2"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAuthToken Load (0.2ms)[0m  [1m[34mSELECT "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = 2[0m
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (0.28ms)
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.3ms)


Started GET "/profile" for 127.0.0.1 at 2017-09-27 12:10:06 +0300
Processing by ProfilesController#show as HTML
  Parameters: {"id"=>"3", "profile"=>{"id"=>"3"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAuthToken Load (0.2ms)[0m  [1m[34mSELECT "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = 3[0m
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (0.3ms)
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.3ms)


Started DELETE "/profile" for 127.0.0.1 at 2017-09-27 12:10:15 +0300
Processing by ProfilesController#destroy as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mAuthToken Load (0.1ms)[0m  [1m[34mSELECT "auth_tokens".* FROM "auth_tokens" WHERE "auth_tokens"."user_id" = 3[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "auth_tokens" WHERE "auth_tokens"."id" = ?[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 3]]
  [1m[35m (165.2ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 171ms (Views: 0.4ms | ActiveRecord: 166.3ms)


Started GET "/profile" for 127.0.0.1 at 2017-09-27 12:10:20 +0300
Processing by ProfilesController#show as HTML
  Parameters: {"id"=>"3", "profile"=>{"id"=>"3"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=3):
  
app/controllers/profiles_controller.rb:32:in `set_profile'
